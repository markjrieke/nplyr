<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Nested mutating joins add columns from y to each of the nested data frames
in .nest_data, matching observations based on the keys. There are four
nested mutating joins:
Inner join


nest_inner_join() only keeps observations from .nest_data that have a
matching key in y.
The most important property of an inner join is that unmatched rows in either
input are not included in the result.



Outer joins


There are three outer joins that keep observations that appear in at least
one of the data frames:
nest_left_join() keeps all observations in .nest_data.
nest_right_join() keeps all observations in y.
nest_full_join() keeps all observations in .nest_data and y.


nest_inner_join(), nest_left_join(), nest_right_join(), and
nest_full_join() are largely wrappers for dplyr::inner_join(),
dplyr::left_join(), dplyr::right_join(), and dplyr::full_join() and
maintain the functionality of these verbs within each nested data frame. For
more information on inner_join(), left_join(), right_join(), or
full_join(), please refer to the documentation in
dplyr.

"><title>Nested Mutating joins — nest-mutate-joins • nplyr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Nested Mutating joins — nest-mutate-joins"><meta property="og:description" content="Nested mutating joins add columns from y to each of the nested data frames
in .nest_data, matching observations based on the keys. There are four
nested mutating joins:
Inner join


nest_inner_join() only keeps observations from .nest_data that have a
matching key in y.
The most important property of an inner join is that unmatched rows in either
input are not included in the result.



Outer joins


There are three outer joins that keep observations that appear in at least
one of the data frames:
nest_left_join() keeps all observations in .nest_data.
nest_right_join() keeps all observations in y.
nest_full_join() keeps all observations in .nest_data and y.


nest_inner_join(), nest_left_join(), nest_right_join(), and
nest_full_join() are largely wrappers for dplyr::inner_join(),
dplyr::left_join(), dplyr::right_join(), and dplyr::full_join() and
maintain the functionality of these verbs within each nested data frame. For
more information on inner_join(), left_join(), right_join(), or
full_join(), please refer to the documentation in
dplyr.

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nplyr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Use-case-for-nplyr.html">Use case for nplyr</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/markjrieke/nplyr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Nested Mutating joins</h1>
      <small class="dont-index">Source: <a href="https://github.com/markjrieke/nplyr/blob/HEAD/R/nest_join.R" class="external-link"><code>R/nest_join.R</code></a></small>
      <div class="d-none name"><code>nest-mutate-joins.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Nested mutating joins add columns from <code>y</code> to each of the nested data frames
in <code>.nest_data</code>, matching observations based on the keys. There are four
nested mutating joins:</p><div class="section">
<h3 id="inner-join">Inner join<a class="anchor" aria-label="anchor" href="#inner-join"></a></h3>


<p><code>nest_inner_join()</code> only keeps observations from <code>.nest_data</code> that have a
matching key in <code>y</code>.</p>
<p>The most important property of an inner join is that unmatched rows in either
input are not included in the result.</p>
</div>

<div class="section">
<h3 id="outer-joins">Outer joins<a class="anchor" aria-label="anchor" href="#outer-joins"></a></h3>


<p>There are three outer joins that keep observations that appear in at least
one of the data frames:</p><ul><li><p><code>nest_left_join()</code> keeps all observations in <code>.nest_data</code>.</p></li>
<li><p><code>nest_right_join()</code> keeps all observations in <code>y</code>.</p></li>
<li><p><code>nest_full_join()</code> keeps all observations in <code>.nest_data</code> and <code>y</code>.</p></li>
</ul><p><code>nest_inner_join()</code>, <code>nest_left_join()</code>, <code>nest_right_join()</code>, and
<code>nest_full_join()</code> are largely wrappers for <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::inner_join()</a></code>,
<code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::left_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::right_join()</a></code>, and <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::full_join()</a></code> and
maintain the functionality of these verbs within each nested data frame. For
more information on <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">right_join()</a></code>, or
<code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code>, please refer to the documentation in
<a href="https://dplyr.tidyverse.org/" class="external-link"><code>dplyr</code></a>.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nest_inner_join</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  <span class="va">.nest_data</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  copy <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".x"</span>, <span class="st">".y"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">nest_left_join</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  <span class="va">.nest_data</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  copy <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".x"</span>, <span class="st">".y"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">nest_right_join</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  <span class="va">.nest_data</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  copy <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".x"</span>, <span class="st">".y"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">nest_full_join</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  <span class="va">.nest_data</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  copy <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  suffix <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".x"</span>, <span class="st">".y"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.data</dt>
<dd><p>A data frame, data frame extension (e.g., a tibble), or a lazy
data frame (e.g., from dbplyr or dtplyr).</p></dd>


<dt>.nest_data</dt>
<dd><p>A list-column containing data frames</p></dd>


<dt>y</dt>
<dd><p>A data frame, data frame extension (e.g., a tibble), or a lazy data
frame (e.g., from dbplyr or dtplyr).</p></dd>


<dt>by</dt>
<dd><p>A character vector of variables to join by or a join specification
created with <code>join_by()</code>.</p></dd>


<dt>copy</dt>
<dd><p>If <code>.nest_data</code> and <code>y</code> are not from the same data source and
<code>copy = TRUE</code> then <code>y</code> will be copied into the same src as <code>.nest_data</code>.
<em>(Need to review this parameter in more detail for applicability with nplyr)</em></p></dd>


<dt>suffix</dt>
<dd><p>If there are non-joined duplicate variables in <code>.nest_data</code> and
<code>y</code>, these suffixes will be added to the output to disambiguate them.
Should be a character vector of length 2.</p></dd>


<dt>...</dt>
<dd><p>Other parameters passed onto methods. Includes:</p><ul><li><p><code>na_matches</code> : Should two <code>NA</code> or two <code>NaN</code> values match?</p><ul><li><p><code>"na"</code>, the default, treats two <code>NA</code> or two <code>NaN</code> values as equal.</p></li>
<li><p><code>"never"</code> treats two <code>NA</code> or two <code>NaN</code> values as different, and will
never match them together or to any other values.</p></li>
</ul></li>
<li><p><code>multiple</code> : Handlind of rows in <code>.nest_data</code> with multiple matches in <code>y</code>.</p><ul><li><p><code>"all"</code> returns every match detected in <code>y</code>.</p></li>
<li><p><code>"any"</code> returns one match detected in <code>y</code>, with no guarantees on which
match will be returned. It is often faster than <code>"first"</code> and <code>"last"</code> if
you just need to detect if there is at least one match.</p></li>
<li><p><code>"first"</code> returns the first match detected in <code>y</code>.</p></li>
<li><p><code>"last"</code> returns the last match detected in <code>y</code>.</p></li>
<li><p><code>"warning"</code> throws a warning if multiple matches are detected, and then
falls back to <code>"all"</code>.</p></li>
<li><p><code>"error"</code> throws an error if multiple matches are detected.</p></li>
</ul></li>
<li><p><code>unmatched</code> : How should unmatched keys that would result in dropped rows
be handled?</p><ul><li><p><code>"drop"</code> drops unmatched keys from the result.</p></li>
<li><p><code>"error"</code> throws an error if unmatched keys are detected.</p></li>
</ul></li>
</ul></dd>


<dt>keep</dt>
<dd><p>Should the join keys from both <code>.nest_data</code> and <code>y</code> be preserved
in the output?</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other joins: 
<code><a href="nest-filter-joins.html">nest-filter-joins</a></code>,
<code><a href="nest_nest_join.html">nest_nest_join</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">gm_nest</span> <span class="op">&lt;-</span> <span class="fu">gapminder</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/gapminder/man/gapminder.html" class="external-link">gapminder</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>country_data <span class="op">=</span> <span class="op">-</span><span class="va">continent</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gm_codes</span> <span class="op">&lt;-</span> <span class="fu">gapminder</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/gapminder/man/country_codes.html" class="external-link">country_codes</a></span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gm_nest</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">nest_inner_join</span><span class="op">(</span><span class="va">country_data</span>, <span class="va">gm_codes</span>, by <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gm_nest</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">nest_left_join</span><span class="op">(</span><span class="va">country_data</span>, <span class="va">gm_codes</span>, by <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gm_nest</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">nest_right_join</span><span class="op">(</span><span class="va">country_data</span>, <span class="va">gm_codes</span>, by <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gm_nest</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">nest_full_join</span><span class="op">(</span><span class="va">country_data</span>, <span class="va">gm_coces</span>, by <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mark Rieke.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer></div>

  

  

  </body></html>

